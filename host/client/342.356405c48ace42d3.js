"use strict";(self.webpackChunkcricketereweb=self.webpackChunkcricketereweb||[]).push([[342],{1342:(z,d,c)=>{c.r(d),c.d(d,{ProductRoutingModule:()=>F});var p=c(2113),v=c(4004),x=c(4671),S=c(4482),L=c(5403);function C(n,a){return n===a}var f=c(3900),T=c(262),m=c(9698),Z=c(8491),s=c(3322),h=c(1950),t=c(8274);let P=(()=>{class n extends h.b{}return n.\u0275fac=function(){let a;return function(o){return(a||(a=t.n5z(n)))(o||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var y=c(6082);let k=(()=>{class n extends h.C{}return n.\u0275fac=function(){let a;return function(o){return(a||(a=t.n5z(n)))(o||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u=c(6895),U=c(1770);function I(n,a){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.AsE(" ",e.name," - ",e.price," ")}}function M(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",12),t.NdJ("click",function(i){t.CHM(e);const r=t.oxw(3);return t.KtG(r.nextPage(i))}),t._uU(1,"Next"),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("href",e.getNextLink(),t.LSH)}}function A(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",5),t._uU(2,"Route to blank page"),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p")(6,"a",6),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.locationChange())}),t._uU(7,"Test location go"),t.qZA()(),t.TgZ(8,"div",7),t._uU(9," Show: "),t.TgZ(10,"a",8),t.NdJ("click",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.showProducts(!0,i))}),t._uU(11,"Public"),t.qZA(),t._uU(12," | "),t.TgZ(13,"a",8),t.NdJ("click",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.showProducts(!1,i))}),t._uU(14,"Private"),t.qZA()(),t.TgZ(15,"ul",9),t.YNc(16,I,2,2,"li",10),t.qZA(),t._uU(17),t.YNc(18,M,2,1,"a",11),t.BQk()}if(2&n){const e=a.ngIf,o=t.oxw().ngIf,i=t.oxw();t.xp6(4),t.hij("Total: ",e.total,""),t.xp6(6),t.Q6J("href",i.getShowLink(!0),t.LSH),t.xp6(3),t.Q6J("href",i.getShowLink(!1),t.LSH),t.xp6(3),t.Q6J("ngForOf",o),t.xp6(1),t.hij(" Page ",e.page," "),t.xp6(1),t.Q6J("ngIf",e.hasMore)}}const Y=function(){return{page:2}};function J(n,a){if(1&n&&(t.TgZ(0,"div",3),t.YNc(1,A,19,6,"ng-container",2),t.ALo(2,"async"),t.TgZ(3,"a",4),t._uU(4,"Test forward with page"),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.params$)),t.xp6(2),t.Q6J("queryParams",t.DdM(4,Y))}}function b(n,a){if(1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"json"),t.BQk()),2&n){const e=a.ngIf;t.xp6(1),t.hij(" ",t.lcZ(2,1,e)," ")}}const w=[{path:"",component:(()=>{class n{constructor(e,o,i,r,l,g,$){this.productService=e,this.productState=o,this.router=i,this.paramState=r,this.location=l,this.toast=g,this.route=$}ngOnInit(){this.params$=this.paramState.stateItem$,this.products$=this.route.paramMap.pipe((0,v.U)(e=>({page:+e.get("page")||1,isPublic:"true"===e.get("public"),size:m.D.Basic.defaultSize})),function _(n,a=x.y){return n=n??C,(0,S.e)((e,o)=>{let i,r=!0;e.subscribe((0,L.x)(o,l=>{const g=a(l);(r||!n(i,g))&&(r=!1,i=g,o.next(l))}))})}((e,o)=>(e.isPublic!==o.isPublic&&(this.productState.emptyList(),o.page=1),e.page>=o.page&&e.isPublic===o.isPublic)),(0,f.w)(e=>this.productService.GetProducts(e).pipe((0,f.w)(o=>{const i=(0,Z.p$)(o.total,e.size,e.page);return this.paramState.UpdateState({total:o.total,hasMore:i,...e}),this.productState.appendList(o.matches)}),(0,T.K)(o=>this.toast.HandleUiError(o))))),this.productState.emptyList(),this.paramState.UpdateState({total:2034,page:1,size:m.D.Basic.defaultSize})}nextPage(e){e.preventDefault();const o=this.paramState.currentItem.page+1,i=this.paramState.currentItem.isPublic;this.router.navigate([".",{page:o,public:i}],{skipLocationChange:!0}),s.Ex.RegisterEvent({event:s.fB.PageView},s.Ex.MapPath(`;page=${o};public=${i}`))}showProducts(e,o){o.preventDefault(),this.router.navigate([".",{page:1,public:e}],{replaceUrl:!0})}getNextLink(){return`/products;page=${this.paramState.currentItem.page+1};public=${this.paramState.currentItem.isPublic}`}getShowLink(e){return`/products;page=1;public=${e}`}locationChange(){this.router.navigate([".",{page:2}],{skipLocationChange:!0})}trackThis(e){s.Ex.RegisterEvent({event:s.fB.Click,source:s.LL.ProductsList},s.Ex.MapProducts([e]))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.M),t.Y36(k),t.Y36(p.F0),t.Y36(P),t.Y36(u.Ye),t.Y36(U.F),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],features:[t._Bn([P])],decls:7,vars:6,consts:[[1,"page"],["class","container",4,"ngIf"],[4,"ngIf"],[1,"container"],["routerLink","/projects",3,"queryParams"],["routerLink","/","target","_blank"],[3,"click"],[1,"spaced"],[3,"href","click"],[1,"rowlist"],[4,"ngFor","ngForOf"],["class","btn",3,"href","click",4,"ngIf"],[1,"btn",3,"href","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,J,5,5,"div",1),t.ALo(2,"async"),t.TgZ(3,"div"),t._uU(4," Somethign else on the page, this works even if above failed "),t.YNc(5,b,3,3,"ng-container",2),t.ALo(6,"async"),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,o.products$)),t.xp6(4),t.Q6J("ngIf",t.lcZ(6,4,o.params$)))},dependencies:[u.sg,u.O5,p.yS,u.Ov,u.Ts],encapsulation:2,changeDetection:0}),n})(),title:"PRODUCTS"}];let F=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,p.Bz.forChild(w)]}),n})()}}]);