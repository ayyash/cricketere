"use strict";(self.webpackChunkcricketereweb=self.webpackChunkcricketereweb||[]).push([[349],{7349:(b,l,a)=>{a.r(l),a.d(l,{ProductRoutes:()=>w});var u=a(6814),p=a(6627),m=a(7398),v=a(3997),g=a(4664),P=a(6306),d=a(1843),x=a(1650),i=a(3799),h=a(9694),t=a(2029);let f=(()=>{class o extends h.b{constructor(){super()}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac})}return o})();var _=a(161);let L=(()=>{class o extends h.C{constructor(){super()}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var T=a(931);function S(o,r){if(1&o&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.AsE(" ",e.name," - ",e.price," ")}}function Z(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",12),t.NdJ("click",function(c){t.CHM(e);const s=t.oxw(3);return t.KtG(s.nextPage(c))}),t._uU(1,"Next"),t.qZA()}if(2&o){const e=t.oxw(3);t.Q6J("href",e.getNextLink(),t.LSH)}}function C(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",5),t._uU(2,"Route to blank page"),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p")(6,"a",6),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(2);return t.KtG(c.locationChange())}),t._uU(7,"Test location go"),t.qZA()(),t.TgZ(8,"div",7),t._uU(9," Show: "),t.TgZ(10,"a",8),t.NdJ("click",function(c){t.CHM(e);const s=t.oxw(2);return t.KtG(s.showProducts(!0,c))}),t._uU(11,"Public"),t.qZA(),t._uU(12," | "),t.TgZ(13,"a",8),t.NdJ("click",function(c){t.CHM(e);const s=t.oxw(2);return t.KtG(s.showProducts(!1,c))}),t._uU(14,"Private"),t.qZA()(),t.TgZ(15,"ul",9),t.YNc(16,S,2,2,"li",10),t.qZA(),t._uU(17),t.YNc(18,Z,2,1,"a",11),t.BQk()}if(2&o){const e=r.ngIf,n=t.oxw().ngIf,c=t.oxw();t.xp6(4),t.hij("Total: ",e.total,""),t.xp6(6),t.Q6J("href",c.getShowLink(!0),t.LSH),t.xp6(3),t.Q6J("href",c.getShowLink(!1),t.LSH),t.xp6(3),t.Q6J("ngForOf",n),t.xp6(1),t.hij(" Page ",e.page," "),t.xp6(1),t.Q6J("ngIf",e.hasMore)}}const k=function(){return{page:2}};function U(o,r){if(1&o&&(t.TgZ(0,"div",3),t.YNc(1,C,19,6,"ng-container",2),t.ALo(2,"async"),t.TgZ(3,"a",4),t._uU(4,"Test forward with page"),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.params$)),t.xp6(2),t.Q6J("queryParams",t.DdM(4,k))}}function I(o,r){if(1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"json"),t.BQk()),2&o){const e=r.ngIf;t.xp6(1),t.hij(" ",t.lcZ(2,1,e)," ")}}const w=[{path:"",component:(()=>{class o{constructor(e,n,c,s,y,A,Y){this.productService=e,this.productState=n,this.router=c,this.paramState=s,this.location=y,this.toast=A,this.route=Y}ngOnInit(){this.params$=this.paramState.stateItem$,this.products$=this.route.paramMap.pipe((0,m.U)(e=>({page:+e.get("page")||1,isPublic:"true"===e.get("public"),size:d.D.Basic.defaultSize})),(0,v.x)((e,n)=>(e.isPublic!==n.isPublic&&(this.productState.emptyList(),n.page=1),e.page>=n.page&&e.isPublic===n.isPublic)),(0,g.w)(e=>this.productService.GetProducts(e).pipe((0,g.w)(n=>{const c=(0,x.p$)(n.total,e.size,e.page);return this.paramState.UpdateState({total:n.total,hasMore:c,...e}),this.productState.appendList(n.matches)}),(0,P.K)(n=>this.toast.HandleUiError(n))))),this.productState.emptyList(),this.paramState.UpdateState({total:2034,page:1,size:d.D.Basic.defaultSize})}nextPage(e){e.preventDefault();const n=this.paramState.currentItem.page+1,c=this.paramState.currentItem.isPublic;this.router.navigate([".",{page:n,public:c}],{skipLocationChange:!0}),i.Ex.RegisterEvent({event:i.fB.PageView},i.Ex.MapPath(`;page=${n};public=${c}`))}showProducts(e,n){n.preventDefault(),this.router.navigate([".",{page:1,public:e}],{replaceUrl:!0})}getNextLink(){return`/products;page=${this.paramState.currentItem.page+1};public=${this.paramState.currentItem.isPublic}`}getShowLink(e){return`/products;page=1;public=${e}`}locationChange(){this.router.navigate([".",{page:2}],{skipLocationChange:!0})}trackThis(e){i.Ex.RegisterEvent({event:i.fB.Click,source:i.LL.ProductsList},i.Ex.MapProducts([e]))}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(_.M),t.Y36(L),t.Y36(p.F0),t.Y36(f),t.Y36(u.Ye),t.Y36(T.F),t.Y36(p.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],standalone:!0,features:[t._Bn([f]),t.jDz],decls:7,vars:6,consts:[[1,"page"],["class","container",4,"ngIf"],[4,"ngIf"],[1,"container"],["routerLink","/projects",3,"queryParams"],["routerLink","/","target","_blank"],[3,"click"],[1,"spaced"],[3,"href","click"],[1,"rowlist"],[4,"ngFor","ngForOf"],["class","btn",3,"href","click",4,"ngIf"],[1,"btn",3,"href","click"]],template:function(n,c){1&n&&(t.TgZ(0,"div",0),t.YNc(1,U,5,5,"div",1),t.ALo(2,"async"),t.TgZ(3,"div"),t._uU(4," Somethign else on the page, this works even if above failed "),t.YNc(5,I,3,3,"ng-container",2),t.ALo(6,"async"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,c.products$)),t.xp6(4),t.Q6J("ngIf",t.lcZ(6,4,c.params$)))},dependencies:[u.ez,u.sg,u.O5,u.Ov,u.Ts,p.Bz,p.rH],encapsulation:2,changeDetection:0})}return o})(),title:"PRODUCTS"}]}}]);